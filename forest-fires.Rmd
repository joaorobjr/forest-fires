---
title: "Forest Fires in Portugal - What Are The Causes?"
author: "By Robson Teixeira, Eduardo Rodrigues and Claudio Rocha"
date: "M:CC -- FCUP, 10/01/2021"
output:
  bookdown::html_document2:
    code_folding: hide
    df_print: paged
    fig_caption: yes
    includes:
      in_header: header.html
    number_sections: yes
    theme: cerulean
    toc: yes
    toc_float: yes
  bookdown::pdf_document2:
    df_print: tibble
    fig_caption: yes
    fig_crop: no
    fig_height: 5
    fig_width: 7
    number_sections: yes
    toc: yes
geometry:
- top=25mm
- bottom=25mm
- left=25mm
- right=20mm
- heightrounded
header-includes: \usepackage{caption} \usepackage{fancyhdr} \usepackage{lmodern} \usepackage[detect-all]{siunitx}
highlight-style: pygments
linkcolor: blue
mainfont: Source Variable Pro
fontsize: 12pt
references:
- author:
  - family: Meira Castro
    given: Ana C.
  - family: Nunes
    given: Adélia
  - family: Sousa
    given: António
  - family: Lourenço
    given: Luciano
  id: geosciences10020053
  issued:
    year: 2020
  publisher: Geosciences
  title: Mapping the Causes of Forest Fires in Portugal by Clustering Analysis
  type: article-journal
sansfont: Source Sans Pro
subtitle: Practical Assignment of Data Mining I
documentclass: report
urlcolor: blue
---

---

```{r setup, include= F}
knitr::opts_chunk$set(echo= T, warning= F, message= F)
require(tidyverse)
require(funModeling)
require(measurements)
require(lubridate)
require(ggplot2)
require(devtools)
require(caret)
require(rpart.plot)
require(kableExtra)
# turns off scientific notation; to turn it back on, use scipen= 0
options(scipen= 999)
```

# Abstract {-}

# Introduction

In this project, we try to find the best machine learning model that more accurately predicts whether a forest fire occurs negligently, intentionally, naturally or recurrently. From a database that was given to us, we divided the work into several parts. First, we analyzed the database according to the variables it contained ....

# Problem Definition

Forest fires are a very important issue that negatively affects climate change. Typically, the causes of forest fires are those oversights, accidents and negligence committed by individuals, intentional acts and natural causes. The latter is the root cause for only a minority of the fires.

Their harmful impacts and effects on ecosystems can be major ones. Among them, we can mention the disappearance of native species, the increase in levels of carbon dioxide in the atmosphere, earth’s nutrients destroyed by the ashes, and the massive loss of wildlife.

Data mining techniques can help in the prediction of the cause of the fire and, thus, better support the decision of taking preventive measures in order to avoid tragedy. In effect, this can play a major role in resource allocation, mitigation and recovery efforts.

# Forest Fire Dataset

The Institute for Nature Conservation and Forests ([ICNF](http://www.icnf.pt/portal/florestas/dfci/estatisticas)) is the governmental body responsible for the nature and forest policies, including the management of protected areas and state managed national, municipal, and communal forests of mainland Portugal. The ICNF has been maintained a database with data of all forest fires that occurred in Portugal over several years. The dataset used in this study is a subset extracted from this database regarding the fires that occurred over 2015. It consist of **7511** records of fires and for each one, there is relevant information such as the GPS coordinates (latitude and longitude) where occur the fire, the date and time of fire alert, the date and time of the first intervention, and the date and time of fire extinction, besides the origin of the ignition, the affected area, and the cause type. The table \@ref(tab:variables) describes all variables contained in `Forest Fires` dataset:


Table (\#tab:variables): List of variables in `Forest Fires` dataset.

Variable          |Type        |Description                   |
------------------|------------|------------------------------|------
id                |integer     |id number                     |
region            |character   |region name                   |
district          |character   |district name                 |
municipality      |character   |municipality name             |
parish            |character   |parish name                   |
lat               |character   |latitude value                |
lon               |character   |longitude value               |
origin            |character   |how the fire started          |
alert_date        |character   |date when fire started        |
alert_hour        |character   |alert hour                    |
extinction_date   |character   |date of the end of fire       |
extinction hour   |character   |hour of the end of fire       |
firstInterv_date  |character   |date of intervention          |
firstInterv_hour  |character   |hour of intervention          |
alert_source      |logical     |alert source                  |
village_area      |numeric     |village area affected         |
vegetation_area   |numeric     |vegetation area affected      |
farming_area      |numeric     |farming area affected         |
village_veget_area|numeric     |total village+veget affected  |
total_area        |numeric     |total area affected           |
cause_type        |character   |cause of the fire             |


A classifications for causes types are presented in table \@ref(tab:cause_type).

Table (\#tab:cause_type): Classifications of causes of forest fires.

Cause Type    |Description                                           
--------------|---------------------------------------------------------------------------------------------
Natural       | lightning generated in thunderstorms
Negligence    | the misguided use of fire in activities such as burning trash, mass burning of agricultural and forest fuels, fun and leisure activities; failure to properly extinguish cigarettes by smokers; the dispersal and transport of incandescent particles from chimneys; etc.
Intentional   | incendiarism and arson, mostly resulting from behaviors and attitudes reacting to theconstraints of agroforestry management systems and to conflicts related to land use
Rekindling    | reburning of an area over which a fire has previously passed, but where fuel has been left that is later ignited by latent heat, sparks, or embers

```{r load_data, include=FALSE}
ffires.raw.path = file("data/fires2015_train.csv")
ffires.raw = as_tibble(read.csv(ffires.raw.path,
                               stringsAsFactors = FALSE, 
                               na.strings = c("-", "","NA"), 
                               encoding = "UTF-8"))
rm(ffires.raw.path)
```


A glimpse of the structure of the `Forest Fires` dataset is provided below:

Table 3: (#tab:glimpse_data) A glimpse the structure of the dataset.

```{r glimpse_data, echo=F, error=F}
glimpse(ffires.raw)

```


A summary for each variable present in dataset is provided below. The metrics displayed are: quantity and percentage of zeros, quantity and quantity and percentage of NA's, data type and quantity of unique values.


Table 4: (\#tab:summary_data) A summary of variables of the dataset.

```{r summary_data, echo=F}
df_status(ffires.raw)
```


A sample the first observations is provided below:

```{r head_data, echo=F}
head(ffires.raw)
```

# Data Preparation

Data preparation consists of the process of cleaning and transforming raw data in a form that can be used by machine learning algorithms. Next sections, we exploit the `Forest Fires` dataset in order to perform the steps of cleaning a transforming, when need.

## Data Cleaning

### Latitude and Longitude {-}

The `Forest Fires` dataset store the latitude and longitude of the place where occurred the fire into variables `lat` e `lon` respectively. These values are in format of *DegreesºMinutes'Seconds"* and for the reason contain special characters `º`, `'`, `:` and `"`. Besides, there are wrong values into variables as dates between the coordinates and values with scientific notation `E-12`, `E-11` and `E-02`. A sample of these inconsistencies is provided in the tables below:

```{r lat_lon_wrong, echo=FALSE}
sample1 = ffires.raw %>% filter(str_detect(lat, 'º')) %>% select(lat, lon)
sample2 = ffires.raw %>% filter(str_detect(lat, '1900-01-01')) %>% select(lat, lon)
sample3 = ffires.raw %>% filter(str_detect(lat, "E-12")) %>% select(lat, lon)

sample1[1,]
sample2[1,]
sample3[1,]

rm(sample1, sample2, sample3)
```

A cleaning and transformation steps were perfomed on `lat` and `lon` variables to remove the special caracters and scientific notation. For the values wrongs where there is a date among the coordinates, it was performed an data imputation based on another observations that has the same `region`, `district`, `municipality` and `parish`. After the cleaning steps, the values were transformated from GPS coordinates to decimals coordinates in order to be able retrieve historical data from nearest weather stations using the [RNOAA](http://spatialecology.weebly.com/r-code--data/34) package 

```{r clean_lat_lon, echo=FALSE}
idx.lat.wrong = which(str_detect(ffires.raw$lat, '1900-01-01'))
lat.wrong = ffires.raw[idx.lat.wrong,]
for (idx in idx.lat.wrong) {
  df_temp = ffires.raw[-idx.lat.wrong,] %>% 
    filter(region == ffires.raw[idx,]$region, 
           district == ffires.raw[idx,]$district,
           municipality == ffires.raw[idx,]$municipality,
           parish == ffires.raw[idx,]$parish)
  ffires.raw$lat[idx] = df_temp$lat[1]
  ffires.raw$lon[idx] = df_temp$lon[1]
}
vec_clean <- c("''"="", "E-12"="", "E-11"="", "E-02"="", ","=".", "º"=" ", "'"=" ", ":"=" ")
ffires.raw$lat <- conv_unit(str_replace_all(str_trim(ffires.raw$lat), vec_clean), "deg_min_sec", "dec_deg")
ffires.raw$lon <- conv_unit(str_replace_all(str_trim(ffires.raw$lon), vec_clean), "deg_min_sec", "dec_deg")
# Workaround
ffires.raw$lon[7511] <- conv_unit("8 34 21.5868000000013", "deg_min_sec", "dec_deg")
rm(df_temp,vec_clean,idx,idx.lat.wrong,lat.wrong)
```


The data imputation and transformation generated 8 NA's in `lat` and `lon` variables for parishes listed below:


```{r lat_lon_na, echo=FALSE}
ffires.raw %>% select(region, district, municipality, parish, lat, lon) %>% filter(is.na(lat))
```

In order to fixing this, the latitude and longitude values for these parishes were imputed directly from the localization data retrieved from the internet.


```{r lat_lon_imputation, echo=FALSE}
#Alentejo - Évora - Mora - Cabeção
ffires.raw$lat[439] = 38.954167
ffires.raw$lon[439] = -8.072778
#Alentejo -	Évora - Montemor-o-Novo - Cortiçadas de Lavre
ffires.raw$lat[1722] = 38.786577
ffires.raw$lon[1722] = -8.432094
#Alentejo - Évora - Montemor-o-Novo - Ciborro
ffires.raw$lat[2633] = 38.800833
ffires.raw$lon[2633] = -8.228056
#Alentejo -	Évora -	Mourão - Granja
ffires.raw$lat[3007] = 38.3 
ffires.raw$lon[3007] = -7.255
#Alentejo -	Évora -	Évora	- Horta das Figueiras
ffires.raw$lat[3443] = 38.545
ffires.raw$lon[3443] = -7.905556
#Alentejo -	Évora - Montemor-o-Novo - Cortiçadas de Lavre
ffires.raw$lat[3586] = 38.786577
ffires.raw$lon[3586] = -8.432094
#Alentejo - Évora - Estremoz - São Lourenço de Mamporcão	
ffires.raw$lat[5284] = 38.890833
ffires.raw$lon[5284] = -7.545833
#	Alentejo - Évora - Mora - Brotas
ffires.raw$lat[7228] = 38.873056
ffires.raw$lon[7228] = -8.15
```

### District {-}

Mainland Portugalis is divided into 18 districts and the variable `district` from `Forest Fires` dataset refer the place where occurred the fires. As seen in table \@ref(tab:summary_data), this variable has 19 unique values, so there are some inconsistent data. The table below display the unique values for this variable:

```{r show_unique_district, echo=F}
unique(ffires.raw$district)
```

As seen in table above, there are two references for the same district: *Viana do Castelo* and *Viana Do Castelo*. So a step of cleaning was performed into this variable values.

```{r clean_district, echo=F}
idx.dist.VC = which(ffires.raw$district == "Viana Do Castelo")
for (idx in idx.dist.VC) {
  ffires.raw[idx,]$district = "Viana do Castelo" 
}
rm(idx, idx.dist.VC)
```

### First Intervention and Extinction {-}

The variables `firstInterv_date` and `firstInterv_hour` store the date and time that occured the the first intervention by autorities after the fire alert. As seem in table 4, these variables have a total of NA's values equals 214 and 215, respectively. In order to reduce these quantity,  a data imputation were performed based on values of `extinction_date` and `extinction_hour` assumption that if there are values for extinction date and time it because some intervention was realized. After data imputatio the quantity of NA's was reduced to 7 in both variables as can be seen below:

```{r firstInterv_imputation, echo=FALSE}
ffires.raw <- ffires.raw %>% rowwise() %>% mutate(firstInterv_date = if_else( is.na(firstInterv_date) && !is.na(extinction_date), extinction_date , firstInterv_date),
                                                firstInterv_hour = if_else( is.na(firstInterv_hour) && !is.na(extinction_hour), extinction_hour , firstInterv_hour))
```

```{r summary_after_firstInterv_imputation, echo=FALSE}
df_status(ffires.raw %>% select(firstInterv_date, firstInterv_hour, extinction_date, extinction_hour))
```

The remaining quantity of NA's values in `firstInterv_date`, `firstInterv_hour`, `extinction_date`, and `extinction_hour` represent 0.9% and 1.2% respectively of the total of observations. As these values are relatively low, these observations were removed from dataset.

```{r echo=F}
ffires.raw = ffires.raw %>% filter(!is.na(firstInterv_date))
ffires.raw = ffires.raw %>% filter(!is.na(firstInterv_hour))
ffires.raw = ffires.raw %>% filter(!is.na(extinction_date))
ffires.raw = ffires.raw %>% filter(!is.na(extinction_hour))
```


### Alert Source {-}

As can be seen in table below, the variable `alert_source` has 100% of values with NA's, so this variable were removed from dataset.

```{r echo=F}
df_status(ffires.raw$alert_source)
ffires.raw = ffires.raw %>% select(-alert_source)
```

## Data Transformation

In the `Forest Fires` dataset, the variables `region`, `district`, `municipality`, `parish`, `origin`, `cause_type` are with the data type as `<character>` when the appropriataded should be a `<factor>`. Thus, a step to transform these variables into the most appropriated data type was performed.

```{r transform_factors, echo=FALSE}
ffires.raw$region = as.factor(ffires.raw$region)
ffires.raw$district = as.factor(ffires.raw$district)
ffires.raw$municipality = as.factor(ffires.raw$municipality)
ffires.raw$parish = as.factor(ffires.raw$parish)
ffires.raw$origin = as.factor(ffires.raw$origin)
ffires.raw$cause_type = as.factor(ffires.raw$cause_type)
```

Besides the variables aforementioned, others also were transformed. The variables `alert_date`, `alert_hour`, `firstInterv_date`, `firstInterv_hour`, `extinction_date`, and `extinction_hour` contains date and time data, and thus, these variables were appropriated merged and transformed in POSIXct object in order to able to handle it as a date. The variables `alert`, `firtsInterv` and `extinction` were created based on corresponding variables, and the ones were removed from the dataset. 

```{r transform_date_time, eval=FALSE, include=FALSE}
# ::: Not run because let a long time to finish
ffires.raw = ffires.raw %>% rowwise() %>% 
  mutate(alert = ymd_hms(str_c(alert_date, alert_hour, sep=" ")),
         extinction = ymd_hms(str_c(extinction_date, extinction_hour, sep=" ")),
         firstInterv = ymd_hms(str_c(firstInterv_date, firstInterv_hour, sep=" ")))

ffires.raw = ffires.raw %>% select(-alert_date, -alert_hour, -extinction_date, -extinction_hour, -firstInterv_date, -firstInterv_hour)
         
ffires.raw=as_tibble(ffires.raw)
save(ffires.transformed, file = "data/ffires.transformed.RData")
```

```{r load_ffires_transformed, echo=F}
load("data/ffires.transformed.RData")
ffires.raw = ffires.transformed
rm(ffires.transformed)
```

## Feature Engineering

### Weather Data {-}

As additional information, let's use weather data in order to build features that can help the models obtain better accuracy. The weather data can be obtained from the National Oceanic and Atmospheric Administration (NOAA) Climate Data Sources using [RNOAA](http://spatialecology.weebly.com/r-code--data/34) package whicu provides free access to National Climatic Data Center's (NCDC) archive of global historical weather and climate data in addition to station history information. These data include quality controlled daily, monthly, seasonal, and yearly measurements of temperature, precipitation, wind, and degree days as well as radar data and 30-year Climate Normals. 

For the propose this analysis, it was created 5 new features: `tavg`, `tavg15d`, `tmax`, `tmin`, and `prcp` based on the following weather measurements:


Measurement  | Description
-------------|-------------------------------------------------------------
tavg         | the average temperature of day (degrees C)
tavg15d      | the average temperature of the last 15 days (degrees C)
tmax         | the maximum temperature of day (degrees C)
tmin         | the minimum temperature od day (degrees C)
prcp         | the precipitation (mm)


In order to retrieve the weather data it was considered the alert date of fire. The sample of the first rows of created features it provided in table below:

```{r get_weather_data, eval=FALSE, include=FALSE}
load("data/station_data.Rdata")

get_nearby_stations = function (df, measure){
  nearby_stations = meteo_nearby_stations(lat_lon_df = df,
                                          station_data = station_data, 
                                          radius = 1000, 
                                          var = measure,
                                          year_min = 2014, year_max = 2015,
                                          limit = 5)
  return(nearby_stations)
}

ffires.raw = ffires.raw %>% mutate(tavg = 0, tavg15d = 0, tmax = 0, tmin = 0, prcp = 0)

fires = distinct(ffires.raw, parish, lat, lon, alert)

for (i in 1:dim(fires)[1]) {
  fire = fires[i,]
  idx = which(ffires.raw$parish == fire$parish & ffires.raw$lat == fire$lat & ffires.raw$lon == fire$lon & ffires.raw$alert == fire$alert)
  df = data.frame(id=fire$parish, latitude=fire$lat, longitude=fire$lon, stringsAsFactors = F)
  stations = get_nearby_stations(df, c("TAVG", "TMAX", "TMIN", "PRCP"))
  
  dt_alert = as.character(as.Date(fire$alert))
  
  # Set TAVG
  for(j in 1:dim(stations[[1]])[1] ){
    wd = ghcnd_search(stations[[1]]$id[j], var = "TAVG", date_min = dt_alert, date_max = dt_alert)
    if(!is.null(wd$tavg) && nrow(wd$tavg)>0 && !is.na(wd$tavg$tavg) && wd$tavg$tavg > 0){
      tavg = wd$tavg$tavg
      ffires.raw[idx,]$tavg = tavg/10
      break()
    }
  }
  
  dt_ini = as.character(as.Date(fire$alert) - ddays(15))
 
  # Set TAVG15D
  for(j in 1:dim(stations[[1]])[1] ){
    wd = ghcnd_search(stations[[1]]$id[j], var = "TAVG", date_min = dt_ini, date_max = dt_alert)
    if(!is.null(wd$tavg) && nrow(wd$tavg)>0){
      tavg15d = mean(wd$tavg$tavg, na.rm = TRUE)
      ffires.raw[idx,]$tavg15d = tavg15d/10
      break()
    }
  }
  
  # Set TMAX
  for(j in 1:dim(stations[[1]])[1] ){
    wd = ghcnd_search(stations[[1]]$id[j], var = "TMAX", date_min = dt_alert, date_max = dt_alert)
    if(!is.null(wd$tmax) && nrow(wd$tmax)>0 && !is.na(wd$tmax$tmax) && wd$tmax$tmax > 0){
      tmax = wd$tmax$tmax
      ffires.raw[idx,]$tmax = tmax/10
      break()
    }
  }
  
  # Set TMIN
  for(j in 1:dim(stations[[1]])[1] ){
    wd = ghcnd_search(stations[[1]]$id[j], var = "TMIN", date_min = dt_alert, date_max = dt_alert)
    if(!is.null(wd$tmin) && nrow(wd$tmin)>0 && !is.na(wd$tmin$tmin) && wd$tmin$tmin > 0){
      tmin = wd$tmin$tmin
      ffires.raw[idx,]$tmin = tmin/10
      break()
    }
  }
  
  # Set PRCP
  for(j in 1:dim(stations[[1]])[1] ){
    wd = ghcnd_search(stations[[1]]$id[j], var = "PRCP", date_min = dt_alert, date_max = dt_alert)
    if(!is.null(wd$prcp) && nrow(wd$prcp)>0 && !is.na(wd$prcp$prcp) && wd$prcp$prcp > 0){
      prcp = wd$prcp$prcp
      ffires.raw[idx,]$prcp = prcp/10
      break()
    }
  }
}
rm(i, j, wd, fire, fires, idx, stations, df, dt_alert, dt_ini)

#Imputation of value in tavg variable based on tmax and tmin
ffires = ffires %>% rowwise() %>%  mutate(tavg = if_else(tavg == 0 & tmax != 0 & tmin != 0, (tmax+tmin)/2, tavg))

#Imputation of value in tavg variable based on tavg15d
ffires = ffires %>% rowwise() %>%  mutate(tavg = if_else(tavg == 0 & tavg15d != 0, tavg15d, tavg))

#Imputation of value in tavg15d variable if NaN
ffires = ffires %>% rowwise() %>%  mutate(tavg15d = if_else(is.nan(tavg15d), 0, tavg15d))

#Imputation of value in tmax variable based on tavg and tmin
ffires = ffires %>% rowwise() %>%  mutate(tmax = if_else(tmax == 0 & tavg != 0 & tmin != 0, (2*tavg)-tmin, tmax))

#Imputation of value in tmin variable based on tavg and tmax
ffires = ffires %>% rowwise() %>%  mutate(tmin = if_else(tmin == 0 & tavg != 0 & tmax != 0, (2*tavg)-tmax, tmin))

save(ffires.weatherData, file = "data/ffires.weatherData.RData")
```

```{r load_ffires_weatherData, echo=F}
load("data/ffires.weatherData.RData")
ffires.raw = ffires.weatherData
rm(ffires.weatherData)
head(ffires.raw %>% select(alert, tavg, tavg15d, tmax, tmin, prcp))
```

After load weather data into `Forest Fire` dataset, some steps of data imputation were performed to reduce the quantity od NA's and zero values. The reasoning for imputation was calculate the value based on other variables. For instance, `tavg` variable with NA or zero value, check if there is values for `tmax` and `tmin` and calculate the average temperature. For `tmax` variable with NA or zero value, check if there is values for `tavg` and `tmin` and calculate the maximum temperature, and so forth. Below it provided the summary of the new features after the data imputation:

```{r summary_weatherData, echo=F}
df_status(ffires.raw %>% select(tavg, tavg15d, tmax, tmin, prcp))
```

### Relevant Features {-}

The variable `alert` provides relevant information for the goal of this analysis. The quantity of unique values for this variable is 7313. This quantity can represent noise for the predictive model. For this reason, it was created two new features based on it: `alert_month` and `alert_period`. The first one is a numeric variable with the month of a fire alert. The latter one is an ordinal feature with 4 values *Morning*, *Afternoon*, *Night*, *Dawn* with a slot of 6 hours each one. After creation of these new features, the `alert` variable was removed from dataset.

Another new feature called `duration` was created based on `alert` and `extinction` variables. Its value is the elapsed time between fire alert and its extinction. We consider that information can be useful help to predict the fire cause type as rekindling.

```{r feature_engenier_alert, echo=F}
#Create feature: alert_month
ffires.raw$alert_month = month(ffires.raw$alert, label = FALSE)

#Create feature: alert_period
ffires.raw$alert_period = if_else(between(hour(ffires.raw$alert),6,11),"Morning",if_else(between(hour(ffires.raw$alert),12,17),"Afternoon",if_else(between(hour(ffires.raw$alert),18,23),"Night", "Dawn")))

#Create feature: duration
ffires.raw = ffires.raw %>% rowwise() %>% mutate(duration = (extinction-alert)/60)

ffires.raw = ffires.raw %>% select(-alert)

ffires.raw = as_tibble(ffires.raw)
```

After the process of feature 

## Dimensionality Reduction
Creating compact projections of the data.

Identifying those input variables that are most relevant to the task.
First, we rename the dataset and extracted some variables to minimize it.
The variables "parish" and "municipality" have many diferent observations,
"id" can be retired because it is only the number of the lines of dataset and we don´t need this column, "region" has 501 NA´s and we don´t have how to substitute them, "alert_source" only has NA´s and it can be removed.








## Feature Selection

```{r eval=FALSE, echo = FALSE}
ffires.rf = ffires
ffires.rf = ffires.rf %>% select(-id, -region, -municipality, -parish, -alert_source, -alert_date, -alert_hour, -firstInterv_date, -firstInterv_hour, -extinction_date, -extinction_hour)
ffires.rf = ffires.rf %>% filter(!is.na(extinction))
ffires.rf = ffires.rf %>% filter(!is.na(firstInterv))
```

changing to numeric
```{r eval=FALSE, echo = FALSE}
ffires.rf$lat = as.numeric(ffires.rf$lat)
ffires.rf$lon = as.numeric(ffires.rf$lon)
ffires.rf$latency_alert_ext = as.numeric(ffires.rf$latency_alert_ext)
ffires.rf$latency_alert_interv = as.numeric(ffires.rf$latency_alert_interv)
ffires.rf$latency_interv_ext = as.numeric(ffires.rf$latency_interv_ext)
```

##Creating train and test datasets
```{r eval=FALSE, echo = FALSE}
df_status(ffires.rf)
set.seed(123456)
idx.trainset = createDataPartition(ffires.rf$cause_type, p = 0.7, list = FALSE)
trainSet = ffires.rf[ idx.trainset,] 
testSet <- ffires.rf[-idx.trainset,]
```




# Exploratory Data Analysis

# Prediction Models

In this section was created

## Distance-based Approach

### K-Nearest Neighbor

## Probabilistic Approach

## Mathematical Formulae

## Logical Approaches

## Optimization Approaches

## Ensemble Approaches

## Assess Models


# Conclusions


# References